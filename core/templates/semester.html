{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/semester.css' %}">
{% endblock %}

{% block content %}
<div class="content2">
    <p class="sem_text">Choose the branch and semester to view the result:</p>
    <form id="semForm" method="get">
        {% csrf_token %}
        <div class="semdiv">
            <!-- <label for="branch">Branch:</label>
            <select name="branch" id="branch" class="branch">
                <option>Computer science & Design</option> 
                <option>Computer Programming</option>
                <option>Information Technology</option>
                <option>Artificial Intelligence</option>   
            </select> -->
            <label for="semester">Semester:</label>
            <select name="semester" id="semester" class="semester">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select>
            <label for="year">Year:</label>
            <select name="year" id="year" class="year">
                {% for year in academic_years %}
                <option>{{year}}</option>
                {% endfor %}
            </select>

            <button type="button" onclick="submitForm()">Search</button>
        </div>
    </form>
</div>

<!-- script for adding semester & year in url -->
<script>
    function submitForm() {
      const semester = document.getElementById("semester").value;
      const year = document.getElementById("year").value;

      if (semester && year) {
        const form = document.getElementById("semForm");
        form.action = `/semester/${semester}/${year}`; // Set the URL dynamically
        form.submit();
      } else {
        alert("Please enter Subject & year");
      }
    }
</script>

{% endblock %}