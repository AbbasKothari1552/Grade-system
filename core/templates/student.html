{% extends 'base.html' %} {% load static %} {% block extra_css %}
<link rel="stylesheet" href="{% static 'css/student.css' %}" />
{% endblock %} {% block content %}
<div class="enroll">
  <p class="enrollment_text">Enter the enrollment number of the student</p>
  <form method="get", action="{% url 'student_data' %}">
    {% csrf_token %}
    <div class="enrollment_div">
      <label for="enrollment">Enrollment No.:</label>
      <input type="text" name="enrollment" id="enrollment"   placeholder="e.g. 12102130501011 (14-digit number)"/>
      <button type="submit" class="search">Search</button>
    </div>
  </form>
</div>
  <span class="or">OR</span>
 <div class="name">
  <p class="name_text">Enter the name of the student</p>
  <form  method="get", action="{% url 'student_data' %}">
    <div class="name_div">
        <label for="enrollment">Student Name:</label>
        <input type="text" name="name" id="name-search" placeholder="Enter your name as on your marksheet">
        <div id="suggestions-box"></div>
     
      <button type="submit" class="search">Search</button>
    </div>
  </form>
</div>

<!-- script for giving name suggestion of students. -->
<script>
  const input = document.getElementById('name-search');
  const suggestionsBox = document.getElementById('suggestions-box');
  suggestionsBox.style.display = 'none';

  input.addEventListener('input', function () {
    const query = this.value.trim();

    if (query.length > 0) {
        // Show suggestions box when there's a query
        fetch(`/name-suggestions/?query=${query}`)
            .then(response => response.json())
            .then(data => {
                suggestionsBox.innerHTML = ''; // Clear previous suggestions
                if (data.suggestions && data.suggestions.length > 0) {
                    data.suggestions.forEach(name => {
                        const suggestion = document.createElement('div');
                        suggestion.textContent = name;
                        suggestion.addEventListener('click', () => {
                            input.value = name; // Set the input value to the clicked suggestion
                            suggestionsBox.innerHTML = ''; // Clear suggestions
                            suggestionsBox.style.display = 'none'; // Hide suggestions
                        });
                        suggestionsBox.appendChild(suggestion);
                    });
                    suggestionsBox.style.display = 'block'; // Show the suggestions box
                } else {
                    suggestionsBox.style.display = 'none'; // Hide the suggestions box if no results
                }
            });
    } else {
        suggestionsBox.style.display = 'none'; // Hide suggestions box if query is empty
    }
});
</script>


{% endblock %}
